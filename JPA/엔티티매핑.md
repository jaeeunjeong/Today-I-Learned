## 엔티티 매핑의 종류

- 객체와 테이블 매핑 : @Entity, @Table
- 필드와 컬럼 매핑 : @Column
- 연관관계 매핑 : @ManyToOne, @OneToOne, @ManyToMany, @OneToMany, @JoinColumn

## 객체와 테이블 매핑

### @Entity

- JPA가 관리하는 엔티티 클래스로 사용하기 위해 붙여줘야하는 어노테이션
- 기본 생성자는 필수
- final, enum, interface, innerclass 등의 사용이 불가능하다

### @Table

- Entity와 매핑할 테이블을 지정한다.
- 속성
    
    
    | 속성 | 기능 |
    | --- | --- |
    | name | 매핑할 테이블 지정 |
    | catalog | 데이터베이스 catalog 매핑 |
    | schema | 데이터베이스 schema 매핑 |
    | uniqueConstraints(DDL) | DDL 생성 시에 유니크 제약 조건 생성 |

## 데이터베이스 스키마 자동 생성

- DDL은 애플리케이션 실행 시점에 자동 생성
- 데이터베이스 방언을 활용해서 데이터베이스에 맞는 적절한 DDL을 생성
- 위 기능은 운영에서는 사용하지 않는다.

## 필드와 컬럼 매핑

### @Column

- 객체 필드를 테이블 컬럼에 맵핑시켜주기 위해 사용
- unique 속성 : 임의의 랜덤값을 사용하기 때문에 **@Table의 uniqueConstraints** 속성을 사용하여 제약조건의 사용이 바람직
- nullable 속성 : DDL 로 생성시 null 값의 허용 여부를 설정한다.

### @Enumerated

- enum타입을 맵핑할 때 사용한다.

| 속성 |  |
| --- | --- |
| ORDINAL | - enum에 정의된 순서대로 숫자로 저장된다.
- 데이터베이스에 숫자로 저장되기에 데이터 크기가 작다
- 저장된 enum의 순서를 바꾸게 되면 값이 변경된다. |
| STRING | - enum에 정의된 문자 그대로 저장된다.
- 데이터베이스의 저장된 값이 크다
- 저장된 enum의 값이 변경되거나 순서가 변경되어도 안전하다. |

### @Temporal

- 날짜 타입을 맵핑할 때 사용

### @Lob

- 데이터베이스의 BLOB, CLOB 타입과 맵핑할 때 사용
- 지정할 수 있는 속성이 없으며, 문자와 맵핑할 때는 CLOB, 숫자와 맵핑할 때는 BLOB를 사용한다.

### @ElementCollection/ @CollectionTable 
- 값 타입 컬렉션 : 엔티티는 아닌, 값으로 사용하는 자바의 premitive 타입이나 객체를 여러 개 저장하고자 할 때, 자바 컬렉션을 사용하는 것.
- 식별자가 없기때문에 추적이 안 된다.
- 일회성에 유리한 거 같음.
- 데이터를 변경하게 되면 전부 다 바꿔야한다.
- @ElementCollection
  - 값 타입 컬렉션을 맵핑할 때 사용한다.
  - 연관된 부모 entity에 의해서만 관리된다. 독립적인 사용이 불가능함.
  - 부모와 생명주기를 같이함(cascade = all)
- @CollectionTable
  - 값 타입 컬렉션을 맵핑할 테이블에 대한 정보를 지정하는 역할을 수행.

## 기본 키 매핑
### 기본키 매핑
- @Id : 데이터베이스 테입블의 기본 키와 객체의 필드를 매핑시켜주는 어노테이션
- @GeneratedValue : 기본키를 자동으로 생성해주는 어노테이션

### SEQUENCE 전략

- 데이터베이스 시퀀스를 사용해서 기본 키를 할당하는 것.